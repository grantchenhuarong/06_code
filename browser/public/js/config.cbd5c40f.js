webpackJsonp([9],{"/ld9":function(s,e,t){"use strict";function a(s){return function(){var e=s.apply(this,arguments);return new Promise(function(s,t){function a(r,i){try{var o=e[r](i),l=o.value}catch(s){return void t(s)}if(!o.done)return Promise.resolve(l).then(function(s){a("next",s)},function(s){a("throw",s)});s(l)}return a("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=t[a])}return s},i=t("0iPh"),o=function(s){return s&&s.__esModule?s:{default:s}}(i),l=t("NYxO");e.default={data:function(){return{bCommitting:!1,Serial:"",Realm:"",Host:"",Port:0,DevicePassword:"",TimeServer:"",AckTimeout:0,KeepaliveTimeout:0,APIAuth:"0",BlackSerialList:"",BlackIPList:"",remoteBasicData:"",remoteSMSData:"",smsserial:"",smss:[],sms:{},smsbaseconfig:{}}},mounted:function(){this.getBaseConfig()},methods:{onSubmit:function(){var s=this;return a(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.$validator.validateAll();case 2:if(t=e.sent){e.next=8;break}return a=s.errors.items[0],s.$message({type:"error",message:a.msg}),(0,o.default)("[name="+a.field+"]").focus(),e.abrupt("return");case 8:s.bCommitting=!0,o.default.get("/api/v1/setbaseconfig",s.getBasicCommitObject()).then(function(e){s.$message({type:"success",message:"配置成功！"})}).always(function(){s.getBaseConfig(),s.bCommitting=!1});case 10:case"end":return e.stop()}},e,s)}))()},onSubmitSMS:function(){var s=this;return a(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.$validator.validateAll();case 2:if(t=e.sent){e.next=8;break}return a=s.errors.items[0],s.$message({type:"error",message:a.msg}),(0,o.default)("[name="+a.field+"]").focus(),e.abrupt("return");case 8:s.bCommitting=!0,o.default.get("/api/v1/sms/setbaseconfig",s.smsbaseconfig).then(function(e){s.$message({type:"success",message:"配置成功！"})}).always(function(){s.smsserial="",s.getSMSList(),s.bCommitting=!1});case 10:case"end":return e.stop()}},e,s)}))()},getBasicCommitObject:function(){return{Serial:this.Serial,Realm:this.Realm,Host:this.Host,Port:this.Port,DevicePassword:this.DevicePassword,TimeServer:this.TimeServer,AckTimeout:this.AckTimeout,KeepaliveTimeout:this.KeepaliveTimeout,APIAuth:this.APIAuth,BlackSerialList:this.BlackSerialList,BlackIPList:this.BlackIPList}},getBaseConfig:function(){var s=this;o.default.get("api/v1/getbaseconfig").then(function(e){s.Serial=e.Serial,s.Realm=e.Realm,s.Host=e.Host,s.Port=e.Port,s.DevicePassword=e.DevicePassword,s.TimeServer=e.TimeServer,s.AckTimeout=e.AckTimeout,s.KeepaliveTimeout=e.KeepaliveTimeout,s.APIAuth=e.APIAuth,s.BlackSerialList=e.BlackSerialList,s.BlackIPList=e.BlackIPList,s.remoteBasicData=JSON.stringify(s.getBasicCommitObject())})},getSMSList:function(){var s=this;""==this.smsserial&&o.default.get("api/v1/sms/list").then(function(e){s.smss=e,e.length>0&&(s.sms=e[0],s.smsserial=e[0].Serial),s.getSMSInfo()})},getSMSInfo:function(){var s=this;""!=this.smsserial&&o.default.get("api/v1/sms/getbaseconfig",{serial:this.smsserial}).then(function(e){s.smsbaseconfig=e,s.smsbaseconfig.PreSerial=s.smsserial,s.remoteSMSData=JSON.stringify(s.smsbaseconfig)})},smschange:function(){this.getSMSInfo()}},computed:r({},(0,l.mapState)(["logoText","logoMiniText","menus","serverInfo"]),{isBasicNoChange:function(){var s=JSON.stringify(this.getBasicCommitObject());return 0==this.remoteBasicData.localeCompare(s)},isSMSNoChange:function(){this.smsbaseconfig.PreSerial=this.smsserial;var s=JSON.stringify(this.smsbaseconfig);return 0==this.remoteSMSData.localeCompare(s)}})}},Mz46:function(s,e,t){"use strict";var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"container-fluid no-padding"},[t("section",{staticClass:"content"},[t("div",{staticClass:"nav-tabs-custom col-lg-offset-2 col-lg-8 no-padding"},[t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"active"},[t("a",{attrs:{href:"#base-config","data-toggle":"tab"}},[s._v(s._s(s.logoText)+" 信令服务配置")])]),s._v(" "),t("li",{on:{click:function(e){e.preventDefault(),s.getSMSList(e)}}},[t("a",{attrs:{href:"#sms-config","data-toggle":"tab"}},[s._v(s._s(s.logoText)+" 流媒体服务配置")])])]),s._v(" "),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane  active",attrs:{id:"base-config"}},[t("form",{staticClass:"form-horizontal",attrs:{role:"form",autocomplete:"off"},on:{submit:function(e){e.preventDefault(),s.onSubmit(e)}}},[t("div",{class:["form-group",{"has-error":s.errors.has("Serial")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-serial"}},[s._v("SIP ID")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.Serial,expression:"Serial",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"sip-serial",type:"text",name:"Serial","data-vv-as":"SIP ID"},domProps:{value:s.Serial},on:{input:function(e){e.target.composing||(s.Serial=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Serial")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Realm")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-realm"}},[s._v("SIP 域")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.Realm,expression:"Realm",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"sip-realm",type:"text",name:"Realm","data-vv-as":"SIP 域"},domProps:{value:s.Realm},on:{input:function(e){e.target.composing||(s.Realm=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Realm")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Host")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-host"}},[s._v("SIP Host")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.Host,expression:"Host",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-host",name:"Host","data-vv-as":"SIP Host"},domProps:{value:s.Host},on:{input:function(e){e.target.composing||(s.Host=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Host")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Port")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-port"}},[s._v("SIP 端口")]),s._v(" "),t("div",{staticClass:"col-sm-7 checkbox"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim",value:s.Port,expression:"Port",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-port",name:"Port","data-vv-as":"SIP 端口"},domProps:{value:s.Port},on:{input:function(e){e.target.composing||(s.Port=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Port")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("DevicePassword")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-dev-pwd"}},[s._v("设备统一接入密码")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.DevicePassword,expression:"DevicePassword",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-dev-pwd",name:"DevicePassword","data-vv-as":"设备统一接入密码"},domProps:{value:s.DevicePassword},on:{input:function(e){e.target.composing||(s.DevicePassword=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("DevicePassword")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("TimeServer")}]},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"sip-time-server"}},[s._v("校时源")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model.trim",value:s.TimeServer,expression:"TimeServer",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"sip-time-server",name:"TimeServer","data-vv-as":"校时源",placeholder:"上级国标编号/NTP"},domProps:{value:s.TimeServer},on:{input:function(e){e.target.composing||(s.TimeServer=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("TimeServer")))])])]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"black-serial-list"}},[s._v("黑名单 ID")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.BlackSerialList,expression:"BlackSerialList",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"black-serial-list",name:"BlackSerialList","data-vv-as":"黑名单 ID"},domProps:{value:s.BlackSerialList},on:{input:function(e){e.target.composing||(s.BlackSerialList=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"})])]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label",attrs:{for:"black-ip-list"}},[s._v("黑名单 IP")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.BlackIPList,expression:"BlackIPList",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",id:"black-ip-list",name:"BlackIPList","data-vv-as":"黑名单 IP"},domProps:{value:s.BlackIPList},on:{input:function(e){e.target.composing||(s.BlackIPList=e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"})])]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("其他配置")]),s._v(" "),t("div",{staticClass:"col-sm-7 checkbox"},[t("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small","true-label":"1","false-label":"0",name:"APIAuth"},model:{value:s.APIAuth,callback:function(e){s.APIAuth="string"==typeof e?e.trim():e},expression:"APIAuth"}},[s._v("HTTP 接口鉴权")]),s._v(" "),t("span",{staticClass:"help-block"})],1)]),s._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-offset-4 col-sm-7"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isBasicNoChange||s.errors.any()||s.bCommitting}},[s._v("保存")])])])])]),s._v(" "),t("div",{staticClass:"tab-pane",attrs:{id:"sms-config"}},[t("form",{staticClass:"form-horizontal",attrs:{role:"form",autocomplete:"off"}},[s.smss.length>0?t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("SMS 服务")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("select",{staticClass:"form-control",domProps:{value:s.smsserial},on:{change:s.smschange}},s._l(s.smss,function(e,a){return t("option",{key:a,domProps:{value:e.Serial}},[s._v(s._s(e.Serial))])}))])]):s._e(),s._v(" "),s.smss.length<=0?t("div",{staticClass:"form-group"},[s._m(0)]):s._e()]),s._v(" "),s.smsbaseconfig.Host?t("form",{staticClass:"form-horizontal",attrs:{role:"form",autocomplete:"off"},on:{submit:function(e){e.preventDefault(),s.onSubmitSMS(e)}}},[t("div",{class:["form-group",{"has-error":s.errors.has("Serial")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("SIP ID")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.Serial,expression:"smsbaseconfig.Serial",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"Serial","data-vv-as":"SIP ID"},domProps:{value:s.smsbaseconfig.Serial},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"Serial",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Serial")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Realm")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("SIP 域")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.Realm,expression:"smsbaseconfig.Realm",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"Realm","data-vv-as":"SIP 域"},domProps:{value:s.smsbaseconfig.Realm},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"Realm",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Realm")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Host")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("SIP Host")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.Host,expression:"smsbaseconfig.Host",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"Host","data-vv-as":"SIP Host"},domProps:{value:s.smsbaseconfig.Host},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"Host",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Host")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("Port")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("SIP 端口")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.Port,expression:"smsbaseconfig.Port",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"Port","data-vv-as":"SIP 端口"},domProps:{value:s.smsbaseconfig.Port},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"Port",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("Port")))])])]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("RTSP 端口")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.RTSPPort,expression:"smsbaseconfig.RTSPPort",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RTSPPort","data-vv-as":"RTSP 端口"},domProps:{value:s.smsbaseconfig.RTSPPort},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"RTSPPort",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("RTSPPort")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("RTMPPort")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("RTMP 端口")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"},{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.RTMPPort,expression:"smsbaseconfig.RTMPPort",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RTMPPort","data-vv-as":"RTMP 端口"},domProps:{value:s.smsbaseconfig.RTMPPort},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"RTMPPort",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("RTMPPort")))])])]),s._v(" "),t("div",{class:["form-group",{"has-error":s.errors.has("RecordPath")}]},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("云录像目录")]),s._v(" "),t("div",{staticClass:"col-sm-7"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.smsbaseconfig.RecordPath,expression:"smsbaseconfig.RecordPath",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",name:"RecordPath","data-vv-as":"云录像目录"},domProps:{value:s.smsbaseconfig.RecordPath},on:{input:function(e){e.target.composing||s.$set(s.smsbaseconfig,"RecordPath",e.target.value.trim())},blur:function(e){s.$forceUpdate()}}}),s._v(" "),t("span",{staticClass:"help-block"},[s._v(s._s(s.errors.first("RecordPath")))])])]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-sm-4 control-label"},[s._v("其他配置")]),s._v(" "),t("div",{staticClass:"col-sm-7 checkbox"},[t("el-checkbox",{staticStyle:{"margin-left":"-19px","margin-top":"-5px"},attrs:{size:"small",name:"GOPCache"},model:{value:s.smsbaseconfig.GOPCache,callback:function(e){s.$set(s.smsbaseconfig,"GOPCache","string"==typeof e?e.trim():e)},expression:"smsbaseconfig.GOPCache"}},[s._v("直播秒开")]),s._v(" "),t("span",{staticClass:"help-block"})],1)]),s._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-offset-4 col-sm-7"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isSMSNoChange||s.errors.any()||s.bCommitting}},[s._v("保存")])])])]):s._e()])])])])])},r=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"alert text-center no-margin"},[s._v("SMS 流媒体服务尚未启动")])])}],i={render:a,staticRenderFns:r};e.a=i},"o9Q+":function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("/ld9"),r=t.n(a),i=t("Mz46"),o=t("VU/8"),l=o(r.a,i.a,null,null,null);e.default=l.exports}});